digraph "" {
	graph [newrank=True,
		rankdir=LR
	];
	subgraph cluster_inputs {
		graph [label=inputs];
		quar_period;
		intervention;
		pop_type;
		pop_size;
		pop_infected;
		n_days;
		location;
	}
	subgraph cluster_tn {
		graph [label=t_n];
		cum_infections_wn;
		cum_symptomatic_wn;
		cum_severe_wn;
		cum_critical_wn;
		cum_tests_wn;
		cum_deaths_wn;
		n_exposed_wn;
		n_quarantined_wn;
	}
	subgraph cluster_tn1 {
		graph [label="t_n+1"];
		cum_infections_wn1;
		cum_symptomatic_wn1;
		cum_severe_wn1;
		cum_critical_wn1;
		cum_tests_wn1;
		cum_deaths_wn1;
		n_exposed_wn1;
		n_quarantined_wn1;
	}

  /**** Inputs -> time step variables ****/

  quar_period -> n_quarantined_wn;
  /* quar_period -> n_exposed_wn; */
  /* quar_period -> cum_infections_wn; */
	/* quar_period -> cum_symptomatic_wn; */
	/* quar_period -> cum_severe_wn; */
	/* quar_period -> cum_critical_wn; */
  /* quar_period -> cum_deaths_wn; */
	/* quar_period -> cum_tests_wn; */

  intervention -> n_exposed_wn; // I'm not sure about this one, we'll need to check the code
  intervention -> n_quarantined_wn;
  /* intervention -> cum_infections_wn; */
	/* intervention -> cum_symptomatic_wn; */
	/* intervention -> cum_severe_wn; */
	/* intervention -> cum_critical_wn; */
  /* intervention -> cum_deaths_wn; */
	intervention -> cum_tests_wn;

  // Pretty much everything is affected by pop_type
  pop_type -> n_quarantined_wn;
  pop_type -> n_exposed_wn;
  pop_type -> cum_infections_wn; // this won't be affected by pop_type at w0 because we specify that with pop_infected
	pop_type -> cum_symptomatic_wn;
	pop_type -> cum_severe_wn;
	pop_type -> cum_critical_wn;
  /* pop_type -> cum_deaths_wn; */ // Always starts at 0
	/* pop_type -> cum_tests_wn; */ // Always starts at 0

	// pop_size is another population factor like pop_type, so the two will affect the same things
	pop_size -> n_quarantined_wn;
	pop_size -> n_exposed_wn;
	pop_size -> cum_infections_wn;
	pop_size -> cum_symptomatic_wn;
	pop_size -> cum_severe_wn;
	pop_size -> cum_critical_wn;
	/* pop_size -> cum_deaths_wn; */
	/* pop_size -> cum_tests_wn; */

  // location is another population factor like pop_type, so the two will affect the same things
  location -> n_quarantined_wn;
  location -> n_exposed_wn;
  location -> cum_infections_wn;
  location -> cum_symptomatic_wn;
  location -> cum_severe_wn;
  location -> cum_critical_wn;
  /* location -> cum_deaths_wn; */
  /* location -> cum_tests_wn; */

  // initial only - pop_infected is cum_infections_t0 anyway...
  /* pop_infected -> n_quarantined_wn; */
  /* pop_infected -> n_exposed_wn; */
  pop_infected -> cum_infections_wn; // Only really effected at w0, but OK as is
	pop_infected -> cum_symptomatic_wn;
	pop_infected -> cum_severe_wn;
	pop_infected -> cum_critical_wn;
  /* pop_infected -> cum_deaths_wn; */
	/* pop_infected -> cum_tests_wn; */

  // n_days doesn't really affect anything in the sim when we explicitly consider time
  /* n_days -> n_quarantined_wn; */
  /* n_days -> n_exposed_wn; */
  /* n_days -> cum_infections_wn; */
	/* n_days -> cum_symptomatic_wn; */
	/* n_days -> cum_severe_wn; */
	/* n_days -> cum_critical_wn; */
  /* n_days -> cum_deaths_wn; */
	/* n_days -> cum_tests_wn; */


  /**** Time steps ****/
  n_quarantined_wn -> n_quarantined_wn1;
  n_quarantined_wn -> n_exposed_wn1;
  /* n_quarantined_wn -> cum_infections_wn1; */
  /* n_quarantined_wn -> cum_symptomatic_wn1; */
  /* n_quarantined_wn -> cum_severe_wn1; */
  /* n_quarantined_wn -> cum_critical_wn1; */
  /* n_quarantined_wn -> cum_tests_wn1; */
  /* n_quarantined_wn -> cum_deaths_wn1; */

  /* n_exposed_wn -> n_quarantined_wn1; */
  n_exposed_wn -> n_exposed_wn1;
  n_exposed_wn -> cum_infections_wn1;
  /* n_exposed_wn -> cum_symptomatic_wn1; */
  /* n_exposed_wn -> cum_severe_wn1; */
  /* n_exposed_wn -> cum_critical_wn1; */
  /* n_exposed_wn -> cum_deaths_wn1; */
  /* n_exposed_wn -> cum_tests_wn1; */

  cum_infections_wn -> n_quarantined_wn1; // More infections => more people who test positive
  cum_infections_wn -> n_exposed_wn1; // More infections => more people exposed
	cum_infections_wn -> cum_infections_wn1;
	cum_infections_wn -> cum_symptomatic_wn1;
	/* cum_infections_wn -> cum_severe_wn1; */
	/* cum_infections_wn -> cum_critical_wn1; */
  /* cum_infections_wn -> cum_deaths_wn1; */
	/* cum_infections_wn -> cum_tests_wn1; */

  cum_symptomatic_wn -> n_quarantined_wn1; // Symptomatic affects testing probability
  /* cum_symptomatic_wn -> n_exposed_wn1; */
  cum_symptomatic_wn -> cum_infections_wn1; // Symptomatic people are more likely to pass the infection on? (i.e. convert an exposure to an active infection)
	cum_symptomatic_wn -> cum_symptomatic_wn1;
	cum_symptomatic_wn -> cum_severe_wn1;
	/* cum_symptomatic_wn -> cum_critical_wn1; */
  /* cum_symptomatic_wn -> cum_deaths_wn1; */
	/* cum_symptomatic_wn -> cum_tests_wn1; */

  /* cum_severe_wn -> n_quarantined_wn1; */
  /* cum_severe_wn -> n_exposed_wn1; */
  /* cum_severe_wn -> cum_infections_wn1; */
	/* cum_severe_wn -> cum_symptomatic_wn1; */
	cum_severe_wn -> cum_severe_wn1;
	cum_severe_wn -> cum_critical_wn1;
  /* cum_severe_wn -> cum_tests_wn1; */
  /* cum_severe_wn -> cum_deaths_wn1; */

  /* cum_critical_wn -> n_quarantined_wn1; */
  /* cum_critical_wn -> n_exposed_wn1; */
  /* cum_critical_wn -> cum_infections_wn1; */
	/* cum_critical_wn -> cum_symptomatic_wn1; */
	/* cum_critical_wn -> cum_severe_wn1; */
	cum_critical_wn -> cum_critical_wn1;
  /* cum_critical_wn -> cum_tests_wn1; */
  cum_critical_wn -> cum_deaths_wn1;

  cum_tests_wn -> n_quarantined_wn1;
  /* cum_tests_wn -> n_exposed_wn1; */
  /* cum_tests_wn -> cum_infections_wn1; */
	/* cum_tests_wn -> cum_symptomatic_wn1; */
	/* cum_tests_wn -> cum_severe_wn1; */
	/* cum_tests_wn -> cum_critical_wn1; */
  /* cum_tests_wn -> cum_deaths_wn1; */
	cum_tests_wn -> cum_tests_wn1;

  /* cum_deaths_wn -> n_quarantined_wn1; */
  cum_deaths_wn -> n_exposed_wn1; // If you're dead, you can't be exposed...
  /* cum_deaths_wn -> cum_infections_wn1; */
	/* cum_deaths_wn -> cum_symptomatic_wn1; */
	/* cum_deaths_wn -> cum_severe_wn1; */
	/* cum_deaths_wn -> cum_critical_wn1; */
  cum_deaths_wn -> cum_deaths_wn1;
	cum_deaths_wn -> cum_tests_wn1; // If you're dead, you can't be tested
}
